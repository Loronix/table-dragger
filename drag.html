<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    .drag-mirror {
    }

    ul {
      list-style-position: inside;
    }
  </style>
</head>
<body>
<button id="button">go</button>
<ul id="ul">
  <li id="test1">1</li>
  <li>2</li>
  <li>3</li>
</ul>
<script>
  let copy
  // 鼠标点击坐标与按下 dom 的距离
  let offsetX
  let offsetY
  document.querySelector('#button').addEventListener('mousedown', (event) => {
    const target = document.querySelector('#test1')
    copy = target.cloneNode(true)
    copy.classList.add('drag-mirror')
    const rect = target.getBoundingClientRect()
    Object.assign(copy.style, {
      width: rect.width + 'px',
      height: rect.height + 'px',
      left: rect.left + 'px',
      top: rect.top + 'px',
    })
    offsetX = event.pageX - rect.left
    copy.style.position = 'fixed'
    document.body.appendChild(copy)
    start({ pageX: event.pageX, pageY: event.pageY })
  })

  function start(mousePosition) {
    let oldPageX = mousePosition.pageX;
    let oldPageY = mousePosition.pageY
    const mouseMove = (event) => {
      const { pageX, pageY } = event
      const distanceX = pageX - oldPageX
      const distanceY = pageY - oldPageY

      Object.assign(copy.style, {
        left:
      })
    }
    const mouseUp = event => {
      const mirror = document.querySelector('.drag-mirror')
      mirror.parentElement.removeChild(mirror)
      document.removeEventListener('mousemove', mouseMove)
      document.removeEventListener('mouseup', mouseUp)
    }
    document.addEventListener('mousemove', mouseMove)

    document.addEventListener('mouseup', mouseUp)
  }


  function getOffset (el) {
    var rect = el.getBoundingClientRect();
    return {
      left: rect.left + getScroll('scrollLeft', 'pageXOffset'),
      top: rect.top + getScroll('scrollTop', 'pageYOffset')
    };
  }

  function getScroll (scrollProp, offsetProp) {
    if (typeof global[offsetProp] !== 'undefined') {
      return global[offsetProp];
    }
    if (documentElement.clientHeight) {
      return documentElement[scrollProp];
    }
    return doc.body[scrollProp];
  }

  function getElementBehindPoint (point, x, y) {
    var p = point || {};
    var state = p.className;
    var el;
    p.className += ' gu-hide';
    el = doc.elementFromPoint(x, y);
    p.className = state;
    return el;
  }
  function removePx(value) {
    return value.split('px')[0]
  }


</script>
</body>
</html>
